#IP协议
IP 是不可靠、无连接的                           
- 版本号 ：4 位，0100 表示 IPv4，0110 表示 IPv6。
- 首部长度 ：4 位
- 服务类型(TOS) ：有：最小时延、最大吞吐量、最高可靠性、最小花费 4 种服务，4 个标识位只能有一个被置为 1。
- 总长度 ：16 位，最长可达 65535 字节。
- 标识 ：16 位，判断分片是哪个数据报的分片。
- 标志 ：3 位，用于标识数据报是否分片。
- 偏移 ：13 位，标识分片的顺序。
- 生存时间(TTL) ：8 位，可以经过的最多的路由器个数。每经过一个处理它的路由器，TTL 值减 1。如果一个数据报的 TTL 值被减至 0，它将被丢弃。
- 协议 ：8 位，ICMP 为 1，IGMP 为 2，TCP 为 6，UDP 为 17，GRE 为 47，ESP 为 50。
- 首部校验和 ：根据 IP 首部计算的校验和码。
- 源 IP 和目的 IP ：数据报头还会包含该数据报的发送方 IP 和接收方 IP。
- 选项 ：可选的信息，多用于安全领域。  
- 数据：不在首部长度范围内的部分    

使用tcpdump抓一个完整的ip数据包：
```
sudo tcpdump -ntx -c 1
```
-n显示ip不显示域名  -t不显示时间 -x以16进制显示内容  -c  1 count 接收一个包

A 类地址网络号范围：1.0.0.0---127.0.0.0/8    
B 类地址网络号范围：128.0.0.0---191.255.0.0/16    
C 类地址网络号范围：192.0.0.0---223.255.255.0/24    
可以在 ABC 类网络的基础上，进一步划分子网：占用主机号的前几个位，用于表示子网号     
IP = 网络号 + 子网号 + 主机号    
子网掩码中的 1 标识了 IP 地址中相应的网络号和子网号    
linux系统本身也是一个路由器，route -n 可以查看路由表，traceroute 追踪路由    
通常使用的ip地址（服务器除外）都用的是内网的ip，加上NAT技术，转换成公网ip+端口号      